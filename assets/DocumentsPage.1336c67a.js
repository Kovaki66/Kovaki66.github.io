import{Q as k}from"./QBtn.dd5138d3.js";import{h as M,Q as U}from"./vm.220c60b4.js";import{u as F,Q as H,g as O,a as V,b as T,c as W,d as X,C as $,e as Y}from"./document-store.d946befc.js";import{a as w,c as Z,r,w as I,o as G,h as f,T as J,W as K,v as ee,X as te,Y as le,Z as S,z as B,A as L,B as y,_ as d,C as c,D as ae,$ as ne,a0 as ie,a1 as oe,E as R,a2 as se,a3 as re}from"./index.1cd2dc35.js";import"./use-timeout.b569c927.js";import"./axios.e90f06c5.js";const ue={ratio:[String,Number]};function ce(e,g){return w(()=>{const u=Number(e.ratio||(g!==void 0?g.value:void 0));return isNaN(u)!==!0&&u>0?{paddingBottom:`${100/u}%`}:null})}const de=16/9;var ge=Z({name:"QImg",props:{...ue,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:de},placeholderSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:g,emit:u}){const _=r(e.initialRatio),p=ce(e,_);let l=null,m=!1;const i=[r(null),r(q())],o=r(0),v=r(!1),h=r(!1),D=w(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),a=w(()=>({width:e.width,height:e.height})),s=w(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition`),n=w(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));I(()=>x(),N);function x(){return e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null}function q(){return e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null}function N(t){l!==null&&(clearTimeout(l),l=null),h.value=!1,t===null?(v.value=!1,i[o.value^1].value=q()):v.value=!0,i[o.value].value=t}function P({target:t}){m!==!0&&(l!==null&&(clearTimeout(l),l=null),_.value=t.naturalHeight===0?.5:t.naturalWidth/t.naturalHeight,z(t,1))}function z(t,b){m===!0||b===1e3||(t.complete===!0?j(t):l=setTimeout(()=>{l=null,z(t,b+1)},50))}function j(t){m!==!0&&(o.value=o.value^1,i[o.value].value=null,v.value=!1,h.value=!1,u("load",t.currentSrc||t.src))}function E(t){l!==null&&(clearTimeout(l),l=null),v.value=!1,h.value=!0,i[o.value].value=null,i[o.value^1].value=q(),u("error",t)}function Q(t){const b=i[t].value,C={key:"img_"+t,class:s.value,style:n.value,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...b};return o.value===t?(C.class+=" q-img__image--waiting",Object.assign(C,{onLoad:P,onError:E})):C.class+=" q-img__image--loaded",f("div",{class:"q-img__container absolute-full",key:"img"+t},f("img",C))}function A(){return v.value!==!0?f("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},M(g[h.value===!0?"error":"default"])):f("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},g.loading!==void 0?g.loading():e.noSpinner===!0?void 0:[f(K,{color:e.spinnerColor,size:e.spinnerSize})])}return N(x()),G(()=>{m=!0,l!==null&&(clearTimeout(l),l=null)}),()=>{const t=[];return p.value!==null&&t.push(f("div",{key:"filler",style:p.value})),h.value!==!0&&(i[0].value!==null&&t.push(Q(0)),i[1].value!==null&&t.push(Q(1))),t.push(f(J,{name:"q-transition--fade"},A)),f("div",{class:D.value,style:a.value,role:"img","aria-label":e.alt},t)}}}),me="/assets/documents2.e2c66efc.png";const fe={class:"row",style:{"margin-top":"40px"}},ve={class:"col-xl-1 col-md-1 col-sm-1",style:{"min-width":"200px","margin-right":"50px","margin-bottom":"20px"}},he={class:"col-xl-10 col-md-7 col-lg-9 col-sm-6 q-gutter-md",style:{"margin-left":"3px"}},ye={class:"row"},_e={class:"absolute-top-right z-top",style:{margin:"5px"}},Se={class:"absolute-bottom text-subtitle2 text-center"},we=d("div",{class:"p-3",style:{padding:"10px","background-color":"lightgrey"}},[d("div",{class:"text-lg"},"Add Document")],-1),pe={class:"col q-gutter-md",style:{padding:"15px"}},xe={class:"row justify-end"},Ne=ee({__name:"DocumentsPage",setup(e){const g=r([]),u=r([]),_=r(!1),p=te(),l=F(),m=r(""),i=r(""),o=async()=>{const a=await O();a&&(l.documents=a,g.value=a,u.value=a)},v=a=>{l.selectedDocument=a,p.push({path:`/editor/${a.id}`})},h=async a=>{S.show(),await Y(a),await o(),S.hide()},D=async()=>{S.show({message:"Loading documents"}),await X({name:m.value,links:[],fileName:`${m.value}.html`}),await o(),S.hide()};return I(()=>i.value,a=>{console.log(a),u.value=g.value.filter(s=>s.name.toLowerCase().includes(a.toLocaleLowerCase()))}),le(async()=>{S.show(),await o(),S.hide()}),(a,s)=>(B(),L(H,null,{default:y(()=>[d("div",fe,[d("div",ve,[c(k,{icon:"add",rounded:"","no-caps":"",style:{"font-size":"20px","margin-left":"25px"},onClick:s[0]||(s[0]=n=>_.value=!0)},{default:y(()=>[ae(" Add new ")]),_:1})]),d("div",he,[c(V,{modelValue:i.value,"onUpdate:modelValue":s[1]||(s[1]=n=>i.value=n),debounce:"500",filled:"",placeholder:"Search",style:{"min-width":"200px","max-width":"800px"}},{append:y(()=>[c(U,{name:"search"})]),_:1},8,["modelValue"]),d("div",ye,[(B(!0),ne(oe,null,ie(u.value,n=>(B(),L(T,{key:n.id,onClick:x=>v(n),style:{width:"100%","max-width":"200px","margin-right":"20px","max-height":"250px"}},{default:y(()=>[d("div",_e,[c(k,{icon:"delete",color:"red-10",round:"",size:"md",onClick:se(x=>h(n.id),["stop"])},null,8,["onClick"])]),c(ge,{src:me},{default:y(()=>[d("div",Se,re(n.name),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))])])]),c(W,{modelValue:_.value,"onUpdate:modelValue":s[3]||(s[3]=n=>_.value=n)},{default:y(()=>[c(T,{class:"rounded-lg",style:{width:"350px"}},{default:y(()=>[we,d("div",pe,[c(V,{dense:"",color:"primary",modelValue:m.value,"onUpdate:modelValue":s[2]||(s[2]=n=>m.value=n),outlined:"",label:"Name"},null,8,["modelValue"]),d("div",xe,[R(c(k,{label:"Cancel",flat:"",class:"rounded-lg w-28"},null,512),[[$]]),R(c(k,{label:"Add",color:"primary",class:"rounded-lg text-white",onClick:D},null,512),[[$]])])])]),_:1})]),_:1},8,["modelValue"])]),_:1}))}});export{Ne as default};
